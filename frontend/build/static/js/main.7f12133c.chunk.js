(this.webpackJsonpclone=this.webpackJsonpclone||[]).push([[0],{71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(23),c=n.n(s),i=n(3),o=n.n(i),u=n(5),l=n(16),j=n(17),d=n(19),p=n(18),I=n(13),b=n(20),h=n.n(b),O=n(38),k=n(25),C=n.n(k),f=h.a.create();f.interceptors.request.use(function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.withCredentials=!0,n=C.a.get("AccessToken"),a=new Date,!(1e3*Object(O.a)(n).exp<a.getTime())){e.next=9;break}return e.next=7,h.a.post("/api/v1/users/getAccessToken",{refreshToken:g},{withCredentials:!0});case 7:r=e.sent,n=r.data.accessToken;case 9:return t.headers.Authorization="Bearer ".concat(n),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return console.log(e),Promise.reject(e)}));var y=f,E=n(6),m=Object(E.a)(),g=null,x=n(11),A=n(14),v=n(1),H=Object(x.b)(null,{signUp:function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("/api/v1/users/signup",e,{withCredentials:!0});case 3:a=t.sent,a.data.accessToken,g=a.data.refreshToken,a.data.refreshToken=void 0,n({type:"SIGN_UP",payload:a.data}),m.push("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(""),n=Object(I.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),i=Object(I.a)(c,2),l=i[0],j=i[1],d=Object(a.useState)(""),p=Object(I.a)(d,2),b=p[0],h=p[1],O=Object(a.useState)(""),k=Object(I.a)(O,2),C=k[0],f=k[1],y=Object(a.useState)(""),E=Object(I.a)(y,2),m=E[0],g=E[1],x=function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.signUp({name:C,password:l,userName:b,email:r,passwordConfirm:m});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{className:"sign-form ",children:[Object(v.jsx)("p",{className:"sign-form-text",children:"Signup now to get started"}),Object(v.jsxs)("div",{className:"sign-fields",children:[Object(v.jsx)("label",{children:"Email"}),Object(v.jsx)("input",{className:"sign-email",value:r,onChange:function(e){return s(e.target.value)},type:"email"}),Object(v.jsx)("label",{children:"Name"}),Object(v.jsx)("input",{className:"sign-name",value:C,type:"text",onChange:function(e){return f(e.target.value)}}),Object(v.jsx)("label",{children:"Username"}),Object(v.jsx)("input",{className:"sign-user-name",type:"text",value:b,onChange:function(e){return h(e.target.value)}}),Object(v.jsx)("label",{children:"Password"}),Object(v.jsx)("input",{className:"sign-password",type:"password",value:l,onChange:function(e){return j(e.target.value)}}),Object(v.jsx)("label",{children:"Confirm Password"}),Object(v.jsx)("input",{className:"confirm-password",type:"password",value:m,onChange:function(e){return g(e.target.value)}}),Object(v.jsxs)("div",{style:{fontSize:"0.7rem"},children:["Already registered? Login"," ",Object(v.jsx)(A.a,{to:"/login",children:Object(v.jsx)("u",{style:{color:"#343a40"},children:"Here"})})]})]}),Object(v.jsx)("button",{onClick:function(e){return x(e)},className:"sign-form-submit",children:"Register"})]})})})),S=Object(x.b)(null,{login:function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("/api/v1/users/login",e,{withCredentials:!0});case 3:a=t.sent,a.data.accessToken,g=a.data.refreshToken,a.data.refreshToken=void 0,n({type:"LOG_IN",payload:a.data}),m.push("/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:"ERROR",payload:t.t0.message}),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(""),n=Object(I.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),i=Object(I.a)(c,2),l=i[0],j=i[1],d=function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.login({email:r,password:l});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{className:"sign-form ",children:[Object(v.jsx)("p",{className:"sign-form-text",children:"Sign In :"}),Object(v.jsxs)("div",{className:"sign-fields",children:[Object(v.jsx)("label",{children:"Email"}),Object(v.jsx)("input",{className:"sign-email",value:r,onChange:function(e){return s(e.target.value)},type:"email"}),Object(v.jsx)("label",{children:"Password"}),Object(v.jsx)("input",{className:"sign-password",type:"password",value:l,onChange:function(e){return j(e.target.value)}}),Object(v.jsxs)("div",{style:{fontSize:"0.7rem"},children:["Dont have an account?"," ",Object(v.jsx)(A.a,{to:"/signup",children:Object(v.jsx)("u",{style:{color:"#343a40"},children:"Register Now"})})]})]}),Object(v.jsx)("button",{onClick:function(e){return d(e)},className:"sign-form-submit",children:"Login"})]})})})),N=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(v.jsxs)("div",{className:"container-login",children:[Object(v.jsx)("div",{className:"left-side",children:"/signup"===this.props.location.pathname?Object(v.jsxs)("div",{className:"left-side-content",children:[Object(v.jsx)("h2",{children:"'Sign up Now!'"}),Object(v.jsx)("p",{children:"Though its just a insta clone\ud83d\ude01"})]}):Object(v.jsx)("div",{className:"left-side-content",children:Object(v.jsx)("h2",{children:"Hola Mundo!"})})}),"/signup"===this.props.location.pathname?Object(v.jsx)("div",{className:"right-side",children:Object(v.jsx)(H,{dom:this.props})}):Object(v.jsx)("div",{className:"right-side",children:Object(v.jsx)(S,{dom:this.props})})]})}}]),n}(r.a.Component),w=n(4),T=n.p+"static/media/default.0bbe4ef8.jpg",D=Object(x.b)((function(e){return{auth:e.auth}}),{logOut:function(e){return function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.delete("/api/v1/users/logout");case 3:n=e.sent,null,g=null,t({type:"SIGN_OUT",payload:n.data}),m.push("/signup"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.auth.userData;if(!e.auth.isSignedIn)return Object(v.jsx)("div",{});var n=function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.logOut();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)(A.a,{to:"/",children:Object(v.jsx)("img",{className:"header-img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGcAAAAdCAMAAACAJoJsAAACwVBMVEUAAAAjHyAjHyD///8zIiIjHyBAQEAkICErICsmJiYsISEmIiKAgIAjHyAnISEtLS0kHyIpKSkkICEkHyEkHyE5OTkkICEjHyAzMzMuIyMkJCQjICElHyImISEjICErKyskJCQoKCgkICEkICEkICElICAmHyNAIEAkICEkISEnJyczMzMmJiYkICFVVVUkICAlISEjICAjHyEjHyElICAjHyEjHyEjICEkICEkICAkICIrIiIkHyAkHyEjICAkICAjHyElISEkISElICArKysmICArKysjICEkHyAkHyAkICIkISEnIyMkICElISEkHyAjICEuLi4kHyAjHyAlICUkISEnIyMkICAkJCQjHyAjHyEpIyMkHyEkICIkICEjICEjICAmIiIjICEkICIjICAkICAkISEkICAlHyIkICEwIDAoIiIjICIkHyIkISEkICQmISEkHyEkICElICIjICEkISEkICAkICAkICAjICAjISElHyEjISEkHyAkHyQjISEkISEmICYjICEkICAkISEkICAkHyApIiIjICEkICAkISElICMkJCQjHyEkICAjICEjHyEkHyEjHyEnIiIkICAjICEkHyAkHyEjICAkISEjHyAkICAkICInJyckHyEkICEkISEjICAjICEkHyEjHyEjICMkHyEmJiYjICAmISEkHyEkICAjIyMkICQlISEkICEjIyMnISEkISEkICAkICAkJCQlICIoIiIkJCQjICAjICAjICMkISEnJyckJCQlISEkICIjIyMkICEjICIpISEjICEkIiIjICAmIiImHyIkICAjIyMkHyEjISEkHyEkHyEkISEjICAmICMjICIkHyAlHyUlICAkHyAkJCQjHyMlHyElICIjICAkICEkICEkHyAlICAkHyAoICgkICAjICEmHyMlIiIkICEkICAkHyQjHyAYxkEZAAAA6nRSTlMA/fwBD/4E+hgUF0MC7i4Rchn5nPsJ+OYKFjLgWi/pBioTucDydlEIyUYaBRuoA3d9l7zDZ8xz2tBHgR7NlN+GikVObxJfDMr03XlNO6E+xdIL1b0wXUK/FfWDLKuAsNHnNcJw751rf1K4ECaYalxANrOqYdmFj8eWrl6SdO0xbZUokZ5Vz+Ql4daNYCO0t5nL23s0h9jsrJ9W9r5xIZPqZLXwpMRQmiKtPevOJDiE8R0nY36vK1ktB7amSIwNDnV4M7KJH+hb9zxKxjqjbOPzVKdYkN4pN9QcQYtoV+K65W7cII6gSVOxPzlNBvrEAAAEaklEQVR4XrXNU5OeiQJF4fV+atq2EXd3bNu2PbE5sTO2bds+tm2sX3HqfFW5m75IJf3c7dq7agP0+GFBQS+6Ulfw02e4GfKqQ99oBl34gc7hJugxy98/oEl0Yb/WcxP0dCmzNJkuvKcDuHHN+c5mnibyLcJ35adl67nq/TmJ3Jg6O6FGs/gWkZBxGvoNN6a/V6CvZlH1nTwgdeqXxM2eeBLyRmcV6MnK481QOTEziwhxRatuT2cGQGb768RB+Kklb8ca3gXY9hBEUj4Cyl4jboEL4UlNpJ93f0Ryu8HPw0BpoBkAp/UMwJiQru5t56vAHY9rcGe0vIl0HUfrLa8BLdvVPldD90I4cB0bTEunLOSfNgL82XUwTRPZosnhGnP1CKQ+ryVhgAJtBcpyrV2zS/0vxG7TDZfUTEbqgrs12AQ9dfqU8ToBWvTKL9XhHFNLAY65A76nyazV+X9w8DD9PlSpXwPwlY4GntXnqDqsxbBTH4bPdS0Ny9zVd7muIJLmzDwO6Dlo0M3D1N4Vadl6H8DomfdnsVeTOapJL2RXDtPZwDgLIgCU6wwozPdJoE0roY+5SfCo9oO++Uk8ZkID6+OxMOQpmKGbh0677JomT+hIAPKWjKBRixilAxzCrboJyNEJdwA8rzF4SV8GBupFUmttBEbo6yQGT8By22G4LgKGuhc+1sE+tdi2gwkDtIlrxul8VukTCYPI0VdhU+7CoWYfgB4/VmCr7gR66SAe0n8AKbqTnm6jUN+Hx3Q+sMuVsFFd3bLGy/2rV+hvueaqJpGp47fD+5oIS/eGmzuNjmSuBsBRXQ8M01bSdQ8wSccUlu+HRP0CajQGnLUGMtQdDPdcaEu6zuWads2gQy2FezSZEUExnMl2Op8HRlNhiP4MaNNBlGkOkKljDoWOwzO6DubFd+8GroTRaiYdavFF/S4UEjdYx/KJZo+FZ3VQQ+cQgDfNn9NYrRlUnNYOCJfoWyTrLGCx3l67Gxgb9UOYookwWQfDc2o992moJS/qASpKiOtvEKNO5xHfDzjxo42/aoY3DSVMHa4pTJwWuBRS1HqadHkqSffrgmUVABPsAzv0J3CvpsHT6me8o7+AoZ5n7l3EzfQsPKgDgYEaDVIWJaT16pmgL3NEGz9MKL5kqHTy2T6/9p6MlSW68K0HanX1iwCcNzT1pUdynV521N/pByMOq2focdpG2G35kep9xP3RDTBJ64EVgaEL1Aeq+W8AOeohjh9WayJvq6eqTqklk7WDuIxlGp30oBo9RJv6l/HaCunHxkDRX3X83wCIJbgeYr02FwGc/PtnQOWnJ/Z90gwQ3rrnn0DrkodHVsAtt9ZFKBzV+0LWdt1CHGNHHUz5fzUwHVoe7V3Kvw7eGSYOit44v4i4bY5L5TpF+oZCjuK69Pv3x1ynpP7B1jRX0c0iL7iWWufQzRabA4FNdK//WB4hWd+he+12D6T4eIzuVeenMMR9dLMXX5nwQWbubUl0t+L3Xnnk6arrOPgfG95WRPTKWcwAAAAASUVORK5CYII=",alt:"InstantGram logo"})}),Object(v.jsx)("div",{className:"header-search",children:Object(v.jsxs)("label",{className:"header-search-label",children:["\ud83d\udd0e",Object(v.jsx)("input",{type:"text",className:"header-search-input"})]})}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:n,children:"Log Out"})}),Object(v.jsx)(A.a,{to:"/user/".concat(t.userId),className:"btn",children:Object(v.jsx)("img",{className:"profile-img",src:T,alt:"Profileimg"})})]})})),J=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.auth.userData;return Object(v.jsxs)("div",{className:"container-main",children:[Object(v.jsx)("div",{className:"posts",children:this.props.auth.isSignedIn?"Signed In as ".concat(e.name,"\ud83e\udd1e"):"Sign Up Now fella"}),Object(v.jsx)("div",{className:"friend-req",children:"Friend Requests"})]})}}]),n}(r.a.Component),U=Object(x.b)((function(e){return{auth:e.auth}}))(J),R=function(e){return Object(v.jsx)("div",{children:"Loading...."})},M=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.a.get("AccessToken")){e.next=3;break}return e.abrupt("return",m.push("/signup"));case 3:return m.push("/loading"),e.next=6,this.props.fetchUser();case 6:m.push("/");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsxs)(w.b,{history:m,children:[Object(v.jsx)(D,{}),Object(v.jsx)(w.a,{path:"/loading",exact:!0,component:R}),Object(v.jsx)(w.a,{path:["/login","/signup"],exact:!0,component:N}),Object(v.jsx)(w.a,{path:"/",exact:!0,component:U})]})})}}]),n}(r.a.Component),Q=Object(x.b)(null,{fetchUser:function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.post("/api/v1/users/fetchUser",{token:e});case 3:a=t.sent,a.data.accessToken,g=a.data.refreshToken,a.data.refreshToken=void 0,n({type:"FETCH_USER",payload:a.data.userData}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:"ERROR",payload:t.t0.message}),m.push("/handleError");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}})(M),G=n(40),V=n(21),K=n(12),B=Object(V.b)({personData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PERSON":return Object(K.a)(Object(K.a)({},e),{},{personData:{userId:t.payload._id,name:t.payload.name,photo:t.payload.photo,userName:t.payload.userName}});default:return Object(K.a)({},e)}},errorHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return Object(K.a)(Object(K.a)({},e),{},{error:t.payload});default:return Object(K.a)({},e)}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:void 0,isSignedIn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_UP":case"LOG_IN":case"FETCH_USER":return Object(K.a)(Object(K.a)({},e),{},{isSignedIn:!0,userData:{accessToken:t.payload.accessToken,userId:t.payload._id,name:t.payload.name,photo:t.payload.photo,userName:t.payload.userName}});case"SIGN_OUT":return Object(K.a)(Object(K.a)({},e),{},{userData:null,isSignedIn:!1});default:return Object(K.a)({},e)}}}),P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.c;c.a.render(Object(v.jsx)(x.a,{store:Object(V.d)(B,P(Object(V.a)(G.a))),children:Object(v.jsx)(Q,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.7f12133c.chunk.js.map